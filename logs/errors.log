{"timestamp": "2025-08-31T11:26:32.870549", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756639592.595614_51617", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 48, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                                                                ~~~^^^\n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T11:26:32.872776", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756639592.595614_51617", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 48, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                                                                ~~~^^^\n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T11:29:12.249199", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756639752.0439548_52243", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 48, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                                                                ~~~^^^\n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T11:29:12.252369", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756639752.0439548_52243", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 48, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                                                                ~~~^^^\n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T13:38:20.749402", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756647500.324824_66277", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 49, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                                                                ~~~^^^\n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T13:38:20.752072", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756647500.324824_66277", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 49, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                                                                ~~~^^^\n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T16:22:42.091229", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756657361.8357298_66277", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 49, in choix\n    LIMIT 10 OFFSET %s\n    \n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-08-31T16:22:42.093359", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756657361.8357298_66277", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "IndexError", "message": "tuple index out of range", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 49, in choix\n    LIMIT 10 OFFSET %s\n    \n", "IndexError: tuple index out of range\n"]}}
{"timestamp": "2025-09-02T17:16:42.176719", "level": "ERROR", "message": "Erreur base de donn\u00e9es: insert or update on table \"stats\" violates foreign key constraint \"stats_user_id_fkey\"\nDETAIL:  Key (user_id)=(23) is not present in table \"users\".\n", "module": "core", "function": "db_request", "line": 153, "request_id": "1756833402.027412_11735", "user_id": 23, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/quiz/update_stats", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "ForeignKeyViolation", "message": "insert or update on table \"stats\" violates foreign key constraint \"stats_user_id_fkey\"\nDETAIL:  Key (user_id)=(23) is not present in table \"users\".\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.errors.ForeignKeyViolation: insert or update on table \"stats\" violates foreign key constraint \"stats_user_id_fkey\"\nDETAIL:  Key (user_id)=(23) is not present in table \"users\".\n\n"]}}
{"timestamp": "2025-09-02T17:17:25.487889", "level": "ERROR", "message": "Exception on /quiz/quiz [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756833445.400137_12050", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principe+3&matiere=Droit+des+soci\u00e9t\u00e9s&auteur=Bienvenu", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:17:25.492141", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756833445.400137_12050", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principe+3&matiere=Droit+des+soci\u00e9t\u00e9s&auteur=Bienvenu", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:17:47.886221", "level": "ERROR", "message": "Exception on /quiz/quiz [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756833467.725903_12161", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principe+3&matiere=Droit+des+soci\u00e9t\u00e9s&auteur=Bienvenu", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:17:47.890803", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756833467.725903_12161", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principe+3&matiere=Droit+des+soci\u00e9t\u00e9s&auteur=Bienvenu", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:17:55.494929", "level": "ERROR", "message": "Exception on /quiz/quiz [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756833475.376178_12161", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principes+jurisprudentiels+de+droit+constitutionnel&matiere=Droit+Constitutionnel&auteur=Divin", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:17:55.500576", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756833475.376178_12161", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principes+jurisprudentiels+de+droit+constitutionnel&matiere=Droit+Constitutionnel&auteur=Divin", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:18:19.910792", "level": "ERROR", "message": "Exception on /quiz/quiz [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756833499.813654_12161", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principe+3&matiere=Droit+des+soci\u00e9t\u00e9s&auteur=Bienvenu", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T17:18:19.914713", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756833499.813654_12161", "user_id": 23, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/quiz?type=public&titre=Principe+3&matiere=Droit+des+soci\u00e9t\u00e9s&auteur=Bienvenu", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "TemplateSyntaxError", "message": "unexpected 'end of statement block'", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 194, in quiz\n    return render_template(\"quiz.html\", type=type, titre=titre, matiere=matiere,\n                        already_liked=already_liked, author_id=author_id, quiz_id=quiz_id)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/templating.py\", line 149, in render_template\n    template = app.jinja_env.get_or_select_template(template_name_or_list)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1087, in get_or_select_template\n    return self.get_template(template_name_or_list, parent, globals)\n           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 1016, in get_template\n    return self._load_template(name, globals)\n           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 975, in _load_template\n    template = self.loader.load(self, name, self.make_globals(globals))\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/loaders.py\", line 138, in load\n    code = environment.compile(source, name, filename)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 771, in compile\n    self.handle_exception(source=source_hint)\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/jinja2/environment.py\", line 942, in handle_exception\n    raise rewrite_traceback_stack(source=source)\n", "  File \"/Users/tchicayadivin/project/templates/quiz.html\", line 47, in template\n    {% if type == \"public\" and %}\n    ^^^^^^^^^^^^^^^^^\n", "jinja2.exceptions.TemplateSyntaxError: unexpected 'end of statement block'\n"]}}
{"timestamp": "2025-09-02T18:22:55.024143", "level": "ERROR", "message": "Exception on /profile [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756837374.9899929_14476", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/profile", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 80, in decorated_function\n    return f(*args, **kwargs)\n", "  File \"/Users/tchicayadivin/project/main/routes.py\", line 39, in profile\n    rows = db_request(\"SELECT matiere, pos\u00e9es, trouv\u00e9es FROM stats WHERE user_id = %s\", (user_id,))\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 152, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-02T18:22:55.025385", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756837374.9899929_14476", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/profile", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 80, in decorated_function\n    return f(*args, **kwargs)\n", "  File \"/Users/tchicayadivin/project/main/routes.py\", line 39, in profile\n    rows = db_request(\"SELECT matiere, pos\u00e9es, trouv\u00e9es FROM stats WHERE user_id = %s\", (user_id,))\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 152, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-02T18:23:00.206804", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756837380.186342_14476", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 152, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-02T18:23:00.209933", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756837380.186342_14476", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 152, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-02T19:56:36.914252", "level": "ERROR", "message": "Exception on /auth/register [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756842996.875655_20491", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 166, in register\n    if db_request(\"SELECT username FROM users WHERE username = %s\", (username,), fetch=True):\n       ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 152, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-02T19:56:36.916922", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756842996.875655_20491", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 143, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 166, in register\n    if db_request(\"SELECT username FROM users WHERE username = %s\", (username,), fetch=True):\n       ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 152, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-02T19:59:58.987129", "level": "ERROR", "message": "Exception on /auth/register [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756843198.974995_25436", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 156, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T19:59:58.989528", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756843198.974995_25436", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 156, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:04:21.095045", "level": "ERROR", "message": "Exception on /auth/register [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756843461.079849_26133", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 156, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:04:21.099817", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756843461.079849_26133", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 156, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:06:56.215917", "level": "ERROR", "message": "Exception on /auth/register [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756843616.205214_26520", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 157, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:06:56.219840", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756843616.205214_26520", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 157, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:07:39.412887", "level": "ERROR", "message": "Exception on /auth/register [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756843659.405063_26871", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 157, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:07:39.415470", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756843659.405063_26871", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 157, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:08:41.311396", "level": "ERROR", "message": "Exception on /auth/register [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756843721.303571_27080", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 157, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-02T20:08:41.314997", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756843721.303571_27080", "user_id": null, "ip": "127.0.0.1", "method": "POST", "url": "http://127.0.0.1:5000/auth/register", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "NameError", "message": "name 'password' is not defined", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/auth/routes.py\", line 157, in register\n    if not arg_is_present([username, password, confirmation]):\n                                     ^^^^^^^^\n", "NameError: name 'password' is not defined\n"]}}
{"timestamp": "2025-09-03T10:11:54.937923", "level": "ERROR", "message": "Erreur base de donn\u00e9es: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n", "module": "core", "function": "db_request", "line": 157, "request_id": "1756894314.921788_36460", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "DatabaseError", "message": "server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.DatabaseError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n"]}}
{"timestamp": "2025-09-03T10:11:54.952638", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756894314.921788_36460", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 39, in choix\n    total_pages = db_request(\"SELECT COUNT(*) FROM quiz_infos WHERE type = 'public'\", fetch=True)[0][0]\n                  ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 156, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-03T10:11:54.954317", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756894314.921788_36460", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 39, in choix\n    total_pages = db_request(\"SELECT COUNT(*) FROM quiz_infos WHERE type = 'public'\", fetch=True)[0][0]\n                  ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 156, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-03T13:40:09.964119", "level": "ERROR", "message": "Erreur base de donn\u00e9es: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n", "module": "core", "function": "db_request", "line": 157, "request_id": "1756906809.949065_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "DatabaseError", "message": "server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.DatabaseError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n"]}}
{"timestamp": "2025-09-03T13:40:09.971437", "level": "ERROR", "message": "Erreur base de donn\u00e9es: error with status PGRES_FATAL_ERROR and no message from the libpq", "module": "core", "function": "db_request", "line": 157, "request_id": "1756906809.949065_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "DatabaseError", "message": "error with status PGRES_FATAL_ERROR and no message from the libpq", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.DatabaseError: error with status PGRES_FATAL_ERROR and no message from the libpq\n"]}}
{"timestamp": "2025-09-03T13:40:09.975510", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756906809.949065_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "TypeError", "message": "'int' object is not subscriptable", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 60, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                          ~~~^^^\n", "TypeError: 'int' object is not subscriptable\n"]}}
{"timestamp": "2025-09-03T13:40:09.976758", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756906809.949065_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "TypeError", "message": "'int' object is not subscriptable", "traceback": ["Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 60, in choix\n    dossiers = [{\"titre\": row[0], \"user_id\": row[1], \"matiere\": row[2],\n                          ~~~^^^\n", "TypeError: 'int' object is not subscriptable\n"]}}
{"timestamp": "2025-09-03T13:41:09.923051", "level": "ERROR", "message": "Erreur base de donn\u00e9es: error with status PGRES_FATAL_ERROR and no message from the libpq", "module": "core", "function": "db_request", "line": 157, "request_id": "1756906869.9216168_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "DatabaseError", "message": "error with status PGRES_FATAL_ERROR and no message from the libpq", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.DatabaseError: error with status PGRES_FATAL_ERROR and no message from the libpq\n"]}}
{"timestamp": "2025-09-03T13:41:09.934107", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756906869.9216168_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 39, in choix\n    total_results = len(db_request(\"\"\"SELECT qq.quiz_id FROM quiz_questions qq LEFT JOIN quiz_infos qi\n                        ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ON qq.quiz_id = qi.quiz_id WHERE type = 'public' GROUP BY qq.quiz_id HAVING COUNT(*) > 3;\"\"\", fetch=True))\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 156, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-03T13:41:09.936000", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756906869.9216168_69328", "user_id": null, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/quiz/routes.py\", line 39, in choix\n    total_results = len(db_request(\"\"\"SELECT qq.quiz_id FROM quiz_questions qq LEFT JOIN quiz_infos qi\n                        ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ON qq.quiz_id = qi.quiz_id WHERE type = 'public' GROUP BY qq.quiz_id HAVING COUNT(*) > 3;\"\"\", fetch=True))\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 156, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-03T14:19:18.975551", "level": "ERROR", "message": "Exception on /profile [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756909158.9370382_74225", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/profile", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 80, in decorated_function\n    return f(*args, **kwargs)\n", "  File \"/Users/tchicayadivin/project/main/routes.py\", line 39, in profile\n    rows = db_request(\"SELECT matiere, pos\u00e9es, trouv\u00e9es FROM stats WHERE user_id = %s\", (user_id,))\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 156, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-03T14:19:18.978147", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756909158.9370382_74225", "user_id": 1, "ip": "127.0.0.1", "method": "GET", "url": "http://127.0.0.1:5000/profile", "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1", "exception": {"type": "InterfaceError", "message": "connection already closed", "traceback": ["Traceback (most recent call last):\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 147, in db_request\n    cursor.execute(text, params)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "psycopg2.OperationalError: server closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\nserver closed the connection unexpectedly\n\tThis probably means the server terminated abnormally\n\tbefore or while processing the request.\n\n", "\nDuring handling of the above exception, another exception occurred:\n\n", "Traceback (most recent call last):\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 80, in decorated_function\n    return f(*args, **kwargs)\n", "  File \"/Users/tchicayadivin/project/main/routes.py\", line 39, in profile\n    rows = db_request(\"SELECT matiere, pos\u00e9es, trouv\u00e9es FROM stats WHERE user_id = %s\", (user_id,))\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n", "  File \"/Users/tchicayadivin/project/helpers/core.py\", line 156, in db_request\n    conn.rollback()\n    ~~~~~~~~~~~~~^^\n", "psycopg2.InterfaceError: connection already closed\n"]}}
{"timestamp": "2025-09-04T01:01:54.688455", "level": "ERROR", "message": "Exception on /auth/login [POST]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756947714.6239455_8", "user_id": null, "ip": "192.168.65.1", "method": "POST", "url": "http://127.0.0.1:5001/auth/login", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/auth/routes.py\", line 39, in login\n    rows = db_request(\"SELECT * FROM users WHERE username = %s\", (username,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:01:54.692401", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756947714.6239455_8", "user_id": null, "ip": "192.168.65.1", "method": "POST", "url": "http://127.0.0.1:5001/auth/login", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/auth/routes.py\", line 39, in login\n    rows = db_request(\"SELECT * FROM users WHERE username = %s\", (username,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:02:15.290485", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756947735.2529874_7", "user_id": null, "ip": "192.168.65.1", "method": "GET", "url": "http://127.0.0.1:5001/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:02:15.293662", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756947735.2529874_7", "user_id": null, "ip": "192.168.65.1", "method": "GET", "url": "http://127.0.0.1:5001/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:02:40.395861", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756947760.38286_7", "user_id": null, "ip": "192.168.65.1", "method": "GET", "url": "http://127.0.0.1:5001/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:02:40.399011", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756947760.38286_7", "user_id": null, "ip": "192.168.65.1", "method": "GET", "url": "http://127.0.0.1:5001/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:06:12.632423", "level": "ERROR", "message": "Exception on /quiz/choix [GET]", "module": "app", "function": "log_exception", "line": 875, "request_id": "1756947972.6000855_8", "user_id": null, "ip": "192.168.65.1", "method": "GET", "url": "http://127.0.0.1:5001/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
{"timestamp": "2025-09-04T01:06:12.636065", "level": "ERROR", "message": "500 Error: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.", "module": "monitoring", "function": "internal_error", "line": 237, "request_id": "1756947972.6000855_8", "user_id": null, "ip": "192.168.65.1", "method": "GET", "url": "http://127.0.0.1:5001/quiz/choix?quiz_type=public", "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36", "exception": {"type": "OperationalError", "message": "connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n", "traceback": ["Traceback (most recent call last):\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 919, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n", "  File \"/usr/local/lib/python3.13/site-packages/flask_cors/extension.py\", line 176, in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ~^^^^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n", "  File \"/usr/local/lib/python3.13/site-packages/flask/app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\n", "  File \"/app/quiz/routes.py\", line 28, in choix\n    rows = db_request(\"\"\"\n        SELECT qi.titre, u.username, qi.matiere, qi.niveau, COUNT(*) AS nombre_de_questions, qi.likes\n    ...<7 lines>...\n        LIMIT 10 OFFSET %s\n    \"\"\", (offset,))\n", "  File \"/app/helpers/core.py\", line 100, in db_request\n    conn = get_connection()\n", "  File \"/app/helpers/core.py\", line 78, in get_connection\n    return psycopg2.connect(database_url)\n           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^\n", "  File \"/usr/local/lib/python3.13/site-packages/psycopg2/__init__.py\", line 122, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\n", "psycopg2.OperationalError: connection to server at \"db.oubipdndzyivnjnozcko.supabase.co\" (2a05:d012:42e:5708:ee33:2bb6:73bb:e6d0), port 5432 failed: Network is unreachable\n\tIs the server running on that host and accepting TCP/IP connections?\n\n"]}}
